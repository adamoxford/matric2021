install.packages("leaflet")
library("tidyverse")
library("leaflet")
library("dplyr")
schoolsData <- read.csv("https://docs.google.com/spreadsheets/d/e/2PACX-1vSlQKk8WNVYV0Zb6sUiq-MWLUwlCB2KS6LIZ1Xvnfife3NAZ3TNzfV32zDm6sPOHg/pub?gid=378172915&single=true&output=csv")
View(schoolsData)
help(addMarkers)
schoolsData %>%
leaflet() %>%
addProviderTiles(providers$Jawg.Terrain) %>%
addMarkers(lng=schoolsData$New.Long, lat=schoolsData$New.Long)
library("leaflet")
install.packages("leaflet")
library("leaflet")
install.packages("leaflet")
R.Version()
library("tidyverse")
library("leaflet")
library("dplyr")
library("leafgl")
library("leaflet.extras")
schoolsData <- read.csv("https://docs.google.com/spreadsheets/d/e/2PACX-1vQRGIMjdnID_DgFPq9JT0KFql7TxngN7_u5IR3ji86aCdqm4_BEhtcxYMiiClXNSfl4zcQNpvhiGNa_/pub?gid=1989311314&single=true&output=csv")
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(schoolsData$School.name, schoolsData$Quintile, schoolsData$X..Change), radius = schoolsData$Quintile, group = "schools") %>%
addSearchFeatures(
targetGroups = 'schools',
options = searchFeaturesOptions(
zoom = 12, openPopup = TRUE, firstTipSubmit = TRUE,
autoCollapse = TRUE, hideMarkerOnCollapse = TRUE ))
#  addCircleMarkers(lng = schoolsData$New.Long, lat = schoolsData$New.Lat, popup = schoolsData$Institution_Name, color = schoolsData$Quintile)
View(schoolsData)
schoolsData <- read.csv("https://docs.google.com/spreadsheets/d/e/2PACX-1vQRGIMjdnID_DgFPq9JT0KFql7TxngN7_u5IR3ji86aCdqm4_BEhtcxYMiiClXNSfl4zcQNpvhiGNa_/pub?gid=1989311314&single=true&output=csv")
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(schoolsData$School.name, schoolsData$Quintile, schoolsData$X..Change), radius = schoolsData$Quintile, group = "schools") %>%
addSearchFeatures(
targetGroups = 'schools',
options = searchFeaturesOptions(
zoom = 12, openPopup = TRUE, firstTipSubmit = TRUE,
autoCollapse = TRUE, hideMarkerOnCollapse = TRUE ))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(schoolsData$School.name, schoolsData$Quintile, schoolsData$X..Change), radius = schoolsData$X2020....Pass, group = "schools")
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste("<b>School:</b>:", schoolsData$School.name, schoolsData$Quintile, schoolsData$X..Change), radius = schoolsData$X2020....Pass, color = schoolsData$Quintile group = "schools")
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste("<b>School:</b>:", schoolsData$School.name, schoolsData$Quintile, schoolsData$X..Change), radius = schoolsData$X2020....Pass, color = schoolsData$Quintile, group = "schools")
schoolsData <- read.csv("https://docs.google.com/spreadsheets/d/e/2PACX-1vQRGIMjdnID_DgFPq9JT0KFql7TxngN7_u5IR3ji86aCdqm4_BEhtcxYMiiClXNSfl4zcQNpvhiGNa_/pub?gid=1989311314&single=true&output=csv")
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste("<b>School:</b>:", schoolsData$School.name, schoolsData$Quintile, schoolsData$X..Change), radius = schoolsData$Quintile, color = schoolsData$Quintile, group = "schools") %>%
addSearchFeatures(
targetGroups = 'schools',
options = searchFeaturesOptions(
zoom = 12, openPopup = TRUE, firstTipSubmit = TRUE,
autoCollapse = TRUE, hideMarkerOnCollapse = TRUE ))
#  addCircleMarkers(lng = schoolsData$New.Long, lat = schoolsData$New.Lat, popup = schoolsData$Institution_Name, color = schoolsData$Quintile)
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste("<b>School:</b>:", schoolsData$School.name, schoolsData$Quintile, schoolsData$X..Change), radius = schoolsData$Quintile, color = schoolsData$Quintile, group = "schools") %>%
addSearchFeatures(
targetGroups = 'schools',
options = searchFeaturesOptions(
zoom = 12, openPopup = TRUE, firstTipSubmit = TRUE,
autoCollapse = TRUE, hideMarkerOnCollapse = TRUE ))
library("leaflet")
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste("<b>School:</b>:", schoolsData$School.name, schoolsData$Quintile, schoolsData$X..Change), radius = schoolsData$Quintile, color = schoolsData$Quintile, group = "schools") %>%
addSearchFeatures(
targetGroups = 'schools',
options = searchFeaturesOptions(
zoom = 10, openPopup = TRUE, firstTipSubmit = TRUE,
autoCollapse = TRUE, hideMarkerOnCollapse = TRUE ))
library("tidyverse")
library("leaflet")
library("dplyr")
library("leafgl")
library("leaflet.extras")
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste("<b>School:</b>:", schoolsData$School.name, schoolsData$Quintile, schoolsData$X..Change), radius = schoolsData$Quintile, color = schoolsData$Quintile, group = "schools") %>%
addSearchFeatures(
targetGroups = 'schools',
options = searchFeaturesOptions(
zoom = 10, openPopup = TRUE, firstTipSubmit = TRUE,
autoCollapse = TRUE, hideMarkerOnCollapse = TRUE ))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste("<b>School:</b>:", schoolsData$School.name, schoolsData$Quintile, schoolsData$X..Change), radius = schoolsData$Quintile, color = schoolsData$Quintile, group = "schools") %>%
addSearchFeatures(
targetGroups = 'schools',
options = searchFeaturesOptions(
zoom = 10, openPopup = TRUE, firstTipSubmit = TRUE,
autoCollapse = TRUE, hideMarkerOnCollapse = TRUE ))
library("tidyverse")
library("leaflet")
library("dplyr")
library("leafgl")
library("leaflet.extras")
schoolsData <- read.csv("https://docs.google.com/spreadsheets/d/e/2PACX-1vQRGIMjdnID_DgFPq9JT0KFql7TxngN7_u5IR3ji86aCdqm4_BEhtcxYMiiClXNSfl4zcQNpvhiGNa_/pub?gid=1989311314&single=true&output=csv")
schoolsImproved <- schoolsData %>% filter(X..Change >= 0)
schoolsWorse <-schoolsData %>% filter(X..Change < 0)
pal <- colorQuantile(palette = "RdYlGn", domain = schoolsData$X2020....Pass)
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(
"<b>School</b>:", schoolsData$School.name,
"<br/><b>Quintile</b>:", schoolsData$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsData$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsData$X..Change),
radius = schoolsData$Quintile, color = ~pal(schoolsData$X2020....Pass), group = "schools") %>%
addSearchFeatures(
targetGroups = 'schools',
options = searchFeaturesOptions(
zoom = 10, openPopup = TRUE, firstTipSubmit = TRUE,
autoCollapse = TRUE, hideMarkerOnCollapse = TRUE ))
version
schoolsImproved <- schoolsData %>% filter(X..Change >= 0)
schoolsWorse <-schoolsData %>% filter(X..Change < 0)
pal <- colorQuantile(palette = "RdYlGn", domain = schoolsData$X2020....Pass)
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(
"<b>School</b>:", schoolsData$School.name,
"<br/><b>Quintile</b>:", schoolsData$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsData$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsData$X..Change),
radius = schoolsData$Quintile, color = ~pal(schoolsData$X2020....Pass), group = "schools") %>%
addSearchFeatures(
targetGroups = 'schools',
options = searchFeaturesOptions(
zoom = 10, openPopup = TRUE, firstTipSubmit = TRUE,
autoCollapse = TRUE, hideMarkerOnCollapse = TRUE ))
library("tidyverse")
library("leaflet")
library("dplyr")
library("leafgl")
library("leaflet.extras")
schoolsImproved <- schoolsData %>% filter(X..Change >= 0)
schoolsWorse <-schoolsData %>% filter(X..Change < 0)
pal <- colorQuantile(palette = "RdYlGn", domain = schoolsData$X2020....Pass)
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(
"<b>School</b>:", schoolsData$School.name,
"<br/><b>Quintile</b>:", schoolsData$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsData$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsData$X..Change),
radius = schoolsData$Quintile, color = ~pal(schoolsData$X2020....Pass), group = "schools") %>%
addSearchFeatures(
targetGroups = 'schools',
options = searchFeaturesOptions(
zoom = 10, openPopup = TRUE, firstTipSubmit = TRUE,
autoCollapse = TRUE, hideMarkerOnCollapse = TRUE ))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(
"<b>School</b>:", schoolsData$School.name,
"<br/><b>Quintile</b>:", schoolsData$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsData$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsData$X..Change),
radius = schoolsData$Quintile, color = ~pal(schoolsData$X2020....Pass), group = "schools") %>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(
"<b>School</b>:", schoolsData$School.name,
"<br/><b>Quintile</b>:", schoolsData$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsData$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsData$X..Change),
radius = schoolsData$Quintile, color = ~pal(schoolsData$X2020....Pass), group = "schools") %>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 10, openPopup = TRUE))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(
"<b>School</b>:", schoolsData$School.name,
"<br/><b>Quintile</b>:", schoolsData$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsData$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsData$X..Change),
radius = schoolsData$Quintile, color = ~pal(schoolsData$X2020....Pass), group = "schools") %>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 5, openPopup = TRUE))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(
"<b>School</b>:", schoolsData$School.name,
"<br/><b>Quintile</b>:", schoolsData$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsData$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsData$X..Change),
radius = schoolsData$Quintile, color = ~pal(schoolsData$X2020....Pass), group = "schools") %>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 5))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(
"<b>School</b>:", schoolsData$School.name,
"<br/><b>Quintile</b>:", schoolsData$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsData$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsData$X..Change),
radius = schoolsData$Quintile, color = ~pal(schoolsData$X2020....Pass), group = "schools") %>%
addReverseSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 29, lat = -24, zoom = 4)
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(
"<b>School</b>:", schoolsData$School.name,
"<br/><b>Quintile</b>:", schoolsData$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsData$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsData$X..Change),
radius = schoolsData$Quintile, color = ~pal(schoolsData$X2020....Pass), group = "schools") %>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 29, lat = -24, zoom = 4)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(
"<b>School</b>:", schoolsData$School.name,
"<br/><b>Quintile</b>:", schoolsData$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsData$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsData$X..Change),
radius = schoolsData$Quintile, color = ~pal(schoolsData$X2020....Pass), group = "schools") %>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 29, lat = -24, zoom = 7)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(
"<b>School</b>:", schoolsData$School.name,
"<br/><b>Quintile</b>:", schoolsData$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsData$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsData$X..Change),
radius = schoolsData$Quintile, color = ~pal(schoolsData$X2020....Pass), group = "schools") %>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 29, lat = -24, zoom = 5)%>%
addProviderTiles(providers$Stamen.TonerLite)
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 29, lat = -24, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 28.47, lat = -24.67, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = -28.47, lat = 24.67, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 28.47, lat = 24.67, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsImproved$Longitude), lat = as.numeric(schoolsImproved$Latitude), popup = paste(
"<b>School</b>:", schoolsImproved$School.name,
"<br/><b>Quintile</b>:", schoolsImproved$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsImproved$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsImproved$X..Change),
radius = schoolsImproved$Quintile, color = ~pal(schoolsImproved$X2020....Pass), group = "Improved") %>%
addCircleMarkers(lng = as.numeric(schoolsWorse$Longitude), lat = as.numeric(schoolsWorse$Latitude), popup = paste(
"<b>School</b>:", schoolsWorse$School.name,
"<br/><b>Quintile</b>:", schoolsWorse$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsWorse$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsWorse$X..Change),
radius = schoolsWorse$Quintile, color = ~pal(schoolsWorse$X2020....Pass), group = "Worse") %>%
addLayersControl(overlayGroups = c("Improved","Worse"),
options = layersControlOptions(collapsed = FALSE))
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(lng = as.numeric(schoolsImproved$Longitude), lat = as.numeric(schoolsImproved$Latitude), popup = paste(
"<b>School</b>:", schoolsImproved$School.name,
"<br/><b>Quintile</b>:", schoolsImproved$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsImproved$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsImproved$X..Change),
radius = schoolsImproved$Quintile, color = ~pal(schoolsImproved$X2020....Pass), group = "Improved") %>%
addCircleMarkers(lng = as.numeric(schoolsWorse$Longitude), lat = as.numeric(schoolsWorse$Latitude), popup = paste(
"<b>School</b>:", schoolsWorse$School.name,
"<br/><b>Quintile</b>:", schoolsWorse$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsWorse$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsWorse$X..Change),
radius = schoolsWorse$Quintile, color = ~pal(schoolsWorse$X2020....Pass), group = "Worse") %>%
addLayersControl(overlayGroups = c("Improved","Worse"),
options = layersControlOptions(collapsed = FALSE))%>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
View(schoolsWorse)
View(schoolsImproved)
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(schoolsImproved, lng = as.numeric(schoolsImproved$Longitude), lat = as.numeric(schoolsImproved$Latitude), popup = paste(
"<b>School</b>:", schoolsImproved$School.name,
"<br/><b>Quintile</b>:", schoolsImproved$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsImproved$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsImproved$X..Change),
radius = schoolsImproved$Quintile, color = ~pal(schoolsImproved$X2020....Pass), group = "Improved") %>%
addCircleMarkers(schoolsWorse, lng = as.numeric(schoolsWorse$Longitude), lat = as.numeric(schoolsWorse$Latitude), popup = paste(
"<b>School</b>:", schoolsWorse$School.name,
"<br/><b>Quintile</b>:", schoolsWorse$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsWorse$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsWorse$X..Change),
radius = schoolsWorse$Quintile, color = ~pal(schoolsWorse$X2020....Pass), group = "Worse") %>%
addLayersControl(overlayGroups = c("Improved","Worse"),
options = layersControlOptions(collapsed = FALSE))%>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
schoolsData %>%
leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(data = schoolsImproved, lng = as.numeric(schoolsImproved$Longitude), lat = as.numeric(schoolsImproved$Latitude), popup = paste(
"<b>School</b>:", schoolsImproved$School.name,
"<br/><b>Quintile</b>:", schoolsImproved$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsImproved$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsImproved$X..Change),
radius = schoolsImproved$Quintile, color = ~pal(schoolsImproved$X2020....Pass), group = "Improved") %>%
addCircleMarkers(data = schoolsWorse, lng = as.numeric(schoolsWorse$Longitude), lat = as.numeric(schoolsWorse$Latitude), popup = paste(
"<b>School</b>:", schoolsWorse$School.name,
"<br/><b>Quintile</b>:", schoolsWorse$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsWorse$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsWorse$X..Change),
radius = schoolsWorse$Quintile, color = ~pal(schoolsWorse$X2020....Pass), group = "Worse") %>%
addLayersControl(overlayGroups = c("Improved","Worse"),
options = layersControlOptions(collapsed = FALSE))%>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
m <- leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(data = schoolsImproved, lng = as.numeric(schoolsImproved$Longitude), lat = as.numeric(schoolsImproved$Latitude), popup = paste(
"<b>School</b>:", schoolsImproved$School.name,
"<br/><b>Quintile</b>:", schoolsImproved$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsImproved$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsImproved$X..Change),
radius = schoolsImproved$Quintile, color = ~pal(schoolsImproved$X2020....Pass), group = "Improved") %>%
addCircleMarkers(data = schoolsWorse, lng = as.numeric(schoolsWorse$Longitude), lat = as.numeric(schoolsWorse$Latitude), popup = paste(
"<b>School</b>:", schoolsWorse$School.name,
"<br/><b>Quintile</b>:", schoolsWorse$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsWorse$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsWorse$X..Change),
radius = schoolsWorse$Quintile, color = ~pal(schoolsWorse$X2020....Pass), group = "Worse") %>%
addLayersControl(overlayGroups = c("Improved","Worse"),
options = layersControlOptions(collapsed = FALSE))%>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
m
m <- leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(data = schoolsImproved, lng = as.numeric(schoolsImproved$Longitude), lat = as.numeric(schoolsImproved$Latitude), popup = paste(
"<b>School</b>:", schoolsImproved$School.name,
"<br/><b>Quintile</b>:", schoolsImproved$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsImproved$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsImproved$X..Change),
radius = schoolsImproved$Quintile, color = ~pal(schoolsImproved$X2020....Pass), group = "Improved") %>%
addLayersControl(overlayGroups = c("Improved","Worse"),
options = layersControlOptions(collapsed = FALSE))%>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
m
m <- leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(data = schoolsImproved, lng = as.numeric(schoolsImproved$Longitude), lat = as.numeric(schoolsImproved$Latitude), popup = paste(
"<b>School</b>:", schoolsImproved$School.name,
"<br/><b>Quintile</b>:", schoolsImproved$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsImproved$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsImproved$X..Change),
radius = schoolsImproved$Quintile, color = ~pal(schoolsImproved$X2020....Pass), group = "Improved") %>%
addCircleMarkers(data = schoolsWorse, lng = as.numeric(schoolsWorse$Longitude), lat = as.numeric(schoolsWorse$Latitude), popup = paste(
"<b>School</b>:", schoolsWorse$School.name,
"<br/><b>Quintile</b>:", schoolsWorse$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsWorse$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsWorse$X..Change),
radius = schoolsWorse$Quintile, color = ~pal(schoolsWorse$X2020....Pass), group = "Worse") %>%
addLayersControl(overlayGroups = c("Improved","Worse"),
options = layersControlOptions(collapsed = FALSE))
m
m <- leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(data = schoolsImproved, lng = as.numeric(schoolsImproved$Longitude), lat = as.numeric(schoolsImproved$Latitude), popup = paste(
"<b>School</b>:", schoolsImproved$School.name,
"<br/><b>Quintile</b>:", schoolsImproved$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsImproved$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsImproved$X..Change),
radius = schoolsImproved$Quintile, color = ~pal(schoolsImproved$X2020....Pass), group = "Improved") %>%
addCircleMarkers(data = schoolsWorse, lng = as.numeric(schoolsWorse$Longitude), lat = as.numeric(schoolsWorse$Latitude), popup = paste(
"<b>School</b>:", schoolsWorse$School.name,
"<br/><b>Quintile</b>:", schoolsWorse$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsWorse$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsWorse$X..Change),
radius = schoolsWorse$Quintile, color = ~pal1(schoolsWorse$X2020....Pass), group = "Worse") %>%
addLayersControl(overlayGroups = c("Improved","Worse"),
options = layersControlOptions(collapsed = FALSE))%>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
library("tidyverse")
library("leaflet")
library("dplyr")
library("leafgl")
library("leaflet.extras")
schoolsImproved <- schoolsData %>% filter(X..Change >= 0)
schoolsWorse <-schoolsData %>% filter(X..Change < 0)
pal <- colorQuantile(palette = "RdYlGn", domain = schoolsImproved$X2020....Pass)
pal1 <- colorQuantile(palette = "RdYlGn", domain = schoolsWorse$X2020....Pass)
m <- leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(data = schoolsImproved, lng = as.numeric(schoolsImproved$Longitude), lat = as.numeric(schoolsImproved$Latitude), popup = paste(
"<b>School</b>:", schoolsImproved$School.name,
"<br/><b>Quintile</b>:", schoolsImproved$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsImproved$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsImproved$X..Change),
radius = schoolsImproved$Quintile, color = ~pal(schoolsImproved$X2020....Pass), group = "Improved") %>%
addCircleMarkers(data = schoolsWorse, lng = as.numeric(schoolsWorse$Longitude), lat = as.numeric(schoolsWorse$Latitude), popup = paste(
"<b>School</b>:", schoolsWorse$School.name,
"<br/><b>Quintile</b>:", schoolsWorse$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsWorse$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsWorse$X..Change),
radius = schoolsWorse$Quintile, color = ~pal1(schoolsWorse$X2020....Pass), group = "Worse") %>%
addLayersControl(overlayGroups = c("Improved","Worse"),
options = layersControlOptions(collapsed = FALSE))%>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
m
m <- leaflet(options = leafletOptions(preferCanvas = FALSE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(data = schoolsImproved, lng = as.numeric(schoolsImproved$Longitude), lat = as.numeric(schoolsImproved$Latitude), popup = paste(
"<b>School</b>:", schoolsImproved$School.name,
"<br/><b>Quintile</b>:", schoolsImproved$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsImproved$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsImproved$X..Change),
radius = schoolsImproved$Quintile, color = ~pal(schoolsImproved$X2020....Pass), group = "Improved") %>%
addCircleMarkers(data = schoolsWorse, lng = as.numeric(schoolsWorse$Longitude), lat = as.numeric(schoolsWorse$Latitude), popup = paste(
"<b>School</b>:", schoolsWorse$School.name,
"<br/><b>Quintile</b>:", schoolsWorse$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsWorse$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsWorse$X..Change),
radius = schoolsWorse$Quintile, color = ~pal1(schoolsWorse$X2020....Pass), group = "Worse") %>%
addLayersControl(overlayGroups = c("Improved","Worse"),
options = layersControlOptions(collapsed = FALSE))%>%
addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
m
m <- leaflet(options = leafletOptions(preferCanvas = FALSE)) %>%
setView(lng = 24.47, lat = -28.47, zoom = 6)%>%
addProviderTiles(providers$Stamen.TonerLite)%>%
addCircleMarkers(data = schoolsImproved, lng = as.numeric(schoolsImproved$Longitude), lat = as.numeric(schoolsImproved$Latitude), popup = paste(
"<b>School</b>:", schoolsImproved$School.name,
"<br/><b>Quintile</b>:", schoolsImproved$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsImproved$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsImproved$X..Change),
radius = schoolsImproved$Quintile, color = ~pal(schoolsImproved$X2020....Pass), group = "Improved") %>%
addCircleMarkers(data = schoolsWorse, lng = as.numeric(schoolsWorse$Longitude), lat = as.numeric(schoolsWorse$Latitude), popup = paste(
"<b>School</b>:", schoolsWorse$School.name,
"<br/><b>Quintile</b>:", schoolsWorse$Quintile,
"<br/><b>Pass rate 2020</b>:", schoolsWorse$X2020....Pass,
"<br/><b>Change y-o-y</b>", schoolsWorse$X..Change),
radius = schoolsWorse$Quintile, color = ~pal1(schoolsWorse$X2020....Pass), group = "Worse") %>%
addLayersControl(overlayGroups = c("Improved","Worse"),
options = layersControlOptions(collapsed = FALSE))%>%
#  addSearchOSM(options = searchOptions(hideMarkerOnCollapse = TRUE, zoom = 7))
addSearchFeatures(
targetGroups = c("Improved","Worse"),
options = searchFeaturesOptions(
zoom = 10, openPopup = TRUE, firstTipSubmit = TRUE,
autoCollapse = TRUE, hideMarkerOnCollapse = TRUE ))
m
