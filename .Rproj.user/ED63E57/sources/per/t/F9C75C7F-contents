#install.packages("tidyverse")
#install.packages("leaflet")
#install.packages("leafgl")

library("tidyverse")
library("leaflet")
library("dplyr")
library("leafgl")
library("leaflet.extras")

schoolsData <- read.csv("https://docs.google.com/spreadsheets/d/e/2PACX-1vQRGIMjdnID_DgFPq9JT0KFql7TxngN7_u5IR3ji86aCdqm4_BEhtcxYMiiClXNSfl4zcQNpvhiGNa_/pub?gid=1989311314&single=true&output=csv")

schoolsData %>% 
  leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
  addProviderTiles(providers$Stamen.TonerLite)%>%
 addCircleMarkers(lng = as.numeric(schoolsData$Longitude), lat = as.numeric(schoolsData$Latitude), popup = paste(schoolsData$School.name, schoolsData$Quintile, schoolsData$X..Change), radius = schoolsData$Quintile, group = "schools") %>%
  addSearchFeatures(
  targetGroups = 'schools',
  options = searchFeaturesOptions(
    zoom = 12, openPopup = TRUE, firstTipSubmit = TRUE,
    autoCollapse = TRUE, hideMarkerOnCollapse = TRUE ))
#  addCircleMarkers(lng = schoolsData$New.Long, lat = schoolsData$New.Lat, popup = schoolsData$Institution_Name, color = schoolsData$Quintile)

m <- leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
  addTiles()%>%
  addMarkers(lng=30.33409, lat=-23.67264)
